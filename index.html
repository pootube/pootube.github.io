<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="YT">
    <title>YouTube</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            background: black;
        }
        #player {
            width: 100%;
            height: 100%;
            border: none;
        }
        #searchBar {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 10px;
            background: #212121;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        #searchInput {
            flex-grow: 1;
            padding: 8px;
            border: none;
            border-radius: 4px;
            background: #303030;
            color: white;
        }
        #searchButton {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: #303030;
            color: white;
            cursor: pointer;
        }
        #playerContainer {
            margin-top: 60px;
            height: calc(100% - 60px);
        }
    </style>
</head>
<body>
    <div id="searchBar">
        <input type="text" id="searchInput" placeholder="Enter YouTube video ID or URL">
        <button id="searchButton">Load</button>
    </div>
    <div id="playerContainer">
        <div id="player"></div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: 'dQw4w9WgXcQ', // Default video
                playerVars: {
                    'autoplay': 0,
                    'playsinline': 1,
                    'controls': 1,
                    'rel': 0,
                    'modestbranding': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            // Block ads when player is ready
            blockAds();
        }

        function onPlayerStateChange(event) {
            // Block ads on state change
            blockAds();
        }

        function blockAds() {
            const adElements = document.querySelectorAll('.video-ads, .ytp-ad-overlay-container, .ytp-ad-skip-button');
            adElements.forEach(ad => ad.remove());

            // Try to skip ad if playing
            const iframe = document.querySelector('#player');
            if (iframe) {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const video = iframeDoc.querySelector('video');
                if (video && iframeDoc.querySelector('.ad-showing')) {
                    video.currentTime = video.duration;
                }
            }
        }

        // Set up ad blocking observer
        const observer = new MutationObserver(blockAds);
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });

        // Handle video loading
        document.getElementById('searchButton').addEventListener('click', () => {
            const input = document.getElementById('searchInput').value;
            let videoId = input;
            
            // Extract video ID if full URL is pasted
            if (input.includes('youtube.com') || input.includes('youtu.be')) {
                const url = new URL(input);
                videoId = url.searchParams.get('v') || 
                         input.split('youtu.be/')[1] ||
                         input.split('embed/')[1];
            }
            
            if (videoId) {
                player.loadVideoById(videoId);
            }
        });

        // Handle enter key in search input
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('searchButton').click();
            }
        });
    </script>
</body>
</html>
